<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/wesleytodd/YeoPress"

    >generator-wordpress (v2.0.2)</a>
</h1>
<h4>A Yeoman generator for WordPress</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.generator-wordpress">module generator-wordpress</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.config">
            function <span class="apidocSignatureSpan">generator-wordpress.</span>config
            <span class="apidocSignatureSpan">(locals, globals)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">generator-wordpress.</span>config.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">generator-wordpress.</span>wordpress</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.generator-wordpress.config">module generator-wordpress.config</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.config.config">
            function <span class="apidocSignatureSpan">generator-wordpress.</span>config
            <span class="apidocSignatureSpan">(locals, globals)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.generator-wordpress.config.prototype">module generator-wordpress.config.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.config.prototype.get">
            function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>get
            <span class="apidocSignatureSpan">(key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.config.prototype.load">
            function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>load
            <span class="apidocSignatureSpan">(filepath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.config.prototype.set">
            function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>set
            <span class="apidocSignatureSpan">(key, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.config.prototype.setGlobal">
            function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>setGlobal
            <span class="apidocSignatureSpan">(key, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.config.prototype.write">
            function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>write
            <span class="apidocSignatureSpan">(filepath, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.generator-wordpress.wordpress">module generator-wordpress.wordpress</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.activateTheme">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>activateTheme
            <span class="apidocSignatureSpan">(themeName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.createDBifNotExists">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>createDBifNotExists
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.downloadLanguageFile">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>downloadLanguageFile
            <span class="apidocSignatureSpan">(language, file, format, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.getContentDir">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getContentDir
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.getCurrentVersion">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getCurrentVersion
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.getDbCredentials">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getDbCredentials
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.getLanguage">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getLanguage
            <span class="apidocSignatureSpan">(contentDir, language, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.getSaltKeys">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getSaltKeys
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.installTheme">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>installTheme
            <span class="apidocSignatureSpan">(generator, config, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.loadConfig">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>loadConfig
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.generator-wordpress.wordpress.setupTheme">
            function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>setupTheme
            <span class="apidocSignatureSpan">(generator, config, done)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>repo</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.generator-wordpress" id="apidoc.module.generator-wordpress">module generator-wordpress</a></h1>


    <h2>
        <a href="#apidoc.element.generator-wordpress.config" id="apidoc.element.generator-wordpress.config">
        function <span class="apidocSignatureSpan">generator-wordpress.</span>config
        <span class="apidocSignatureSpan">(locals, globals)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">config = function (locals, globals) {
	// Default config file name
	this.filename = &#x27;.yeopress&#x27;;

	// Load files
	this.global = this.load(path.join(process.env.HOME  || process.env.USERPROFILE, this.filename)) || {};
	this.local = this.load() || {};

	// Set initial data
	if (locals) this.set(locals);
	if (globals) this.setGlobal(globals);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.generator-wordpress.config" id="apidoc.module.generator-wordpress.config">module generator-wordpress.config</a></h1>


    <h2>
        <a href="#apidoc.element.generator-wordpress.config.config" id="apidoc.element.generator-wordpress.config.config">
        function <span class="apidocSignatureSpan">generator-wordpress.</span>config
        <span class="apidocSignatureSpan">(locals, globals)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">config = function (locals, globals) {
	// Default config file name
	this.filename = &#x27;.yeopress&#x27;;

	// Load files
	this.global = this.load(path.join(process.env.HOME  || process.env.USERPROFILE, this.filename)) || {};
	this.local = this.load() || {};

	// Set initial data
	if (locals) this.set(locals);
	if (globals) this.setGlobal(globals);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.generator-wordpress.config.prototype" id="apidoc.module.generator-wordpress.config.prototype">module generator-wordpress.config.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.generator-wordpress.config.prototype.get" id="apidoc.element.generator-wordpress.config.prototype.get">
        function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>get
        <span class="apidocSignatureSpan">(key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (key) {
	// Get a single key
	if (key) {
		if (typeof this.local[key] !== &#x27;undefined&#x27;) {
			return this.local[key];
		}
		if (typeof this.global[key] !== &#x27;undefined&#x27;) {
			return this.global[key];
		}
		return;
	}

	// Get all data
	var data = {};
	for (var g in this.global) data[g] = this.global[g];
	for (var l in this.local) data[l] = this.local[l];
	return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		this.logger.verbose(&#x27;Got current WP version: &#x27; + ver);
		this.conf.set(&#x27;wpVer&#x27;, ver);
		getInput();
	}.bind(this));

	// Get the input
	var getInput = function getInput() {
		this.prompt(require(&#x27;./prompts&#x27;)(this.options.advanced, this.conf.<span class="apidocCodeKeywordSpan">get</span>()),
function(input) {
			this.prompt([{
				message: &#x27;Does this all look correct?&#x27;,
				name: &#x27;confirm&#x27;,
				type: &#x27;confirm&#x27;
			}], function(i) {
				if (i.confirm) {
					// Set port
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.config.prototype.load" id="apidoc.element.generator-wordpress.config.prototype.load">
        function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>load
        <span class="apidocSignatureSpan">(filepath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">load = function (filepath) {
	filepath = filepath || this.filename;
	if (fs.existsSync(filepath)) {
		var content = fs.readFileSync(filepath, {encoding: &#x27;utf8&#x27;});
		return JSON.parse(content);
	}
	return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Constructor
var Config = module.exports = function(locals, globals) {
	// Default config file name
	this.filename = &#x27;.yeopress&#x27;;

	// Load files
	this.global = this.<span class="apidocCodeKeywordSpan">load</span>(path.join(process.env.HOME  || process.env.USERPROFILE, this
.filename)) || {};
	this.local = this.load() || {};

	// Set initial data
	if (locals) this.set(locals);
	if (globals) this.setGlobal(globals);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.config.prototype.set" id="apidoc.element.generator-wordpress.config.prototype.set">
        function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>set
        <span class="apidocSignatureSpan">(key, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (key, val) {
	if (typeof val !== &#x27;undefined&#x27;) {
		// Set a single key
		this.local[key] = val;
	} else {
		// Set multiple keys
		for (var i in key) this.local[i] = key[i];
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this.logger.log(art.wp, {logPrefix: &#x27;&#x27;});
	
	// Get the current version number of wordpress
	this.logger.verbose(&#x27;Getting current WP version&#x27;);
	wordpress.getCurrentVersion(function(err, ver) {
		if (err) this.logger.warn(&#x27;Error getting WP versions.  Falling back to &#x27; + ver);
		this.logger.verbose(&#x27;Got current WP version: &#x27; + ver);
		this.conf.<span class="apidocCodeKeywordSpan">set</span>(&#x27;wpVer&#x27;, ver);
		getInput();
	}.bind(this));

	// Get the input
	var getInput = function getInput() {
		this.prompt(require(&#x27;./prompts&#x27;)(this.options.advanced, this.conf.get()), function(input) {
			this.prompt([{
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.config.prototype.setGlobal" id="apidoc.element.generator-wordpress.config.prototype.setGlobal">
        function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>setGlobal
        <span class="apidocSignatureSpan">(key, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setGlobal = function (key, val) {
	if (typeof val !== &#x27;undefined&#x27;) {
		// Set a single key
		this.global[key] = val;
	} else {
		// Set multiple keys
		for (var i in key) this.global[i] = key[i];
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	// Load files
	this.global = this.load(path.join(process.env.HOME  || process.env.USERPROFILE, this.filename)) || {};
	this.local = this.load() || {};

	// Set initial data
	if (locals) this.set(locals);
	if (globals) this.<span class="apidocCodeKeywordSpan">setGlobal</span>(globals);
};

// Set local config values
Config.prototype.set = function(key, val) {
	if (typeof val !== &#x27;undefined&#x27;) {
		// Set a single key
		this.local[key] = val;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.config.prototype.write" id="apidoc.element.generator-wordpress.config.prototype.write">
        function <span class="apidocSignatureSpan">generator-wordpress.config.prototype.</span>write
        <span class="apidocSignatureSpan">(filepath, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (filepath, data) {
	filepath = filepath || this.filename;
	data = data || this.get();
	fs.writeFileSync(filepath, JSON.stringify(data, null, &#x27;\t&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		this.logger.log(&#x27;Running vagrant up&#x27;);
		var child = require(&#x27;child_process&#x27;).exec(&#x27;vagrant up&#x27;, function(err) {
			if (err) return this.logger.error(err);
			this.logger.verbose(&#x27;Finished running Vagrant&#x27;);
			done();
		}.bind(this));
		child.on(&#x27;error&#x27;, function(err) {
			process.stderr.<span class="apidocCodeKeywordSpan">write</span>(err);
		});
		child.stdout.on(&#x27;data&#x27;, function(data) {
			process.stdout.write(data);
		});
		child.stderr.on(&#x27;data&#x27;, function(err) {
			process.stderr.write(err);
		});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.generator-wordpress.wordpress" id="apidoc.module.generator-wordpress.wordpress">module generator-wordpress.wordpress</a></h1>


    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.activateTheme" id="apidoc.element.generator-wordpress.wordpress.activateTheme">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>activateTheme
        <span class="apidocSignatureSpan">(themeName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function activateTheme(themeName, callback) {
	var ee = new EventEmitter();

	getDbCredentials().on(&#x27;done&#x27;, function(db) {

		var connection = mysql.createConnection({
			host     : db.host,
			user     : db.user,
			password : db.pass,
			database : db.name
		});

		connection.connect(function(err) {
			if (err) return ee.emit(&#x27;error&#x27;, err);

			var q = [
				&#x22;UPDATE &#x22; + db.prefix + &#x22;options&#x22;,
				&#x22;SET option_value =  &#x22;+ mysql.escape(themeName),
				&#x22;WHERE option_name = &#x27;template&#x27;&#x22;,
				&#x22;OR option_name = &#x27;stylesheet&#x27;&#x22;	
			].join(&#x27;\n&#x27;);

			connection.query(q, function(err, rows, fields) {
				if (err) return ee.emit(&#x27;error&#x27;, err);
				connection.end(function() {
					ee.emit(&#x27;done&#x27;);
				});
			});

		});

	});

	if (typeof callback === &#x27;function&#x27;) {
		ee.on(&#x27;done&#x27;, callback);
	}

	return ee;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if (this.conf.get(&#x27;installTheme&#x27;)) {
		var done = this.async();

		this.logger.log(&#x27;Starting to install theme&#x27;);
		wordpress.installTheme(this, this.conf.get(), function() {
			//@TODO You need to run the install before doing this
			//see if I can get yeopress to do that.
			//wordpress.<span class="apidocCodeKeywordSpan">activateTheme</span>(this.conf.get(), done);
			this.logger.verbose(&#x27;Theme install complete&#x27;);
			done();
		}.bind(this));
	}

};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.createDBifNotExists" id="apidoc.element.generator-wordpress.wordpress.createDBifNotExists">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>createDBifNotExists
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createDBifNotExists(callback) {
	var ee = new EventEmitter();

	getDbCredentials().on(&#x27;done&#x27;, function(db) {

		var connection = mysql.createConnection({
			host     : db.host,
			user     : db.user,
			password : db.pass
		});

		connection.connect(function(err) {
			if (err) return ee.emit(&#x27;error&#x27;, err);

			connection.query(&#x27;CREATE DATABASE IF NOT EXISTS &#x27; + mysql.escapeId(db.name), function(err, rows, fields) {
				if (err) return ee.emit(&#x27;error&#x27;, err);
				connection.end(function() {
					ee.emit(&#x27;done&#x27;);
				});
			});

		});

	}).on(&#x27;error&#x27;, function(err) {
		ee.emit(&#x27;error&#x27;, err);
	});

	if (typeof callback === &#x27;function&#x27;) {
		ee.on(&#x27;done&#x27;, callback);
	}

	return ee;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.downloadLanguageFile" id="apidoc.element.generator-wordpress.wordpress.downloadLanguageFile">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>downloadLanguageFile
        <span class="apidocSignatureSpan">(language, file, format, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function downloadLanguageFile(language, file, format, callback) {
	// Build url with or without a file
	if (file &#x26;&#x26; file != &#x27;&#x27;) {
		var url = util.format(&#x27;/projects/wp/dev/%s/%s/default/export-translations?format=%s&#x27;, file, language, format);
	} else {
		var url = util.format(&#x27;/projects/wp/dev/%s/default/export-translations?format=%s&#x27;, language, format);
	}

	// Make request
	http.get({
		hostname: &#x27;translate.wordpress.org&#x27;,
		path: url,
	}, function(res) {
		// Not found
		if (res.statusCode == 404) {
			// Retry with the language code with no region specifier
			if (language.indexOf(&#x27;_&#x27;) !== -1) {
				// es_ES =&#x3e; es
				language = language.split(&#x27;_&#x27;)[0];
				return downloadLanguageFile(language, file, format, callback);
			}
			// Not found
			return callback(res);
		}

		// Success
		callback(null, res);
	}).on(&#x27;error&#x27;, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	wordpress = require(&#x27;../util/wordpress&#x27;);

wordpress.getLanguage(&#x27;tmp&#x27;, &#x27;es_ES&#x27;, function(err) {
	console.error(err);
	console.log(&#x27;All done&#x27;);
});

//wordpress.<span class="apidocCodeKeywordSpan">downloadLanguageFile</span>(&#x27;es_ES&#x27;, &#x27;admin&#x27;, &#x27;mo&#x27;,
function(err, res) {
//	if (err) return console.error(err);
//	var f = fs.createWriteStream(&#x27;tmp/es_ES.mo&#x27;);
//	res.pipe(f);
//});
//wordpress.getSaltKeys().on(&#x27;end&#x27;, function(keys) {
//	console.log(keys);
//});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.getContentDir" id="apidoc.element.generator-wordpress.wordpress.getContentDir">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getContentDir
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getContentDir() {
	var ee = new EventEmitter();

	function checkSimpleContentLocations() {
		fs.exists(&#x27;wp-content&#x27;, function(exists) {
			if (exists) {
				fs.realpath(&#x27;wp-content&#x27;, function(err, p) {
					if (err) return ee.emit(&#x27;error&#x27;, err);
					ee.emit(&#x27;done&#x27;, path.relative(&#x27;.&#x27;, p));
				});
			} else {
				fs.exists(&#x27;content&#x27;, function(exists) {
					if (exists) {
						fs.realpath(&#x27;content&#x27;, function(err, p) {
							if (err) erroree.emit(&#x27;error&#x27;, err);
							ee.emit(&#x27;done&#x27;, path.relative(&#x27;.&#x27;, p));
						});
					} else {
						ee.emit(&#x27;error&#x27;, &#x27;Cannot determine content directory.&#x27;);
					}
				});
			}
		});
	}

	loadConfig().on(&#x27;done&#x27;, function(contents) {
		var matches = contents.match(/define\([&#x22;&#x27;]WP_CONTENT_DIR[&#x22;&#x27;],[\s]*(.*)\)/);
		if (matches &#x26;&#x26; matches[1]) {

			exec(&#x27;php -r &#x22;echo &#x27; + matches[1] + &#x27;;&#x22;&#x27;, function(err, stdout) {
				if (err) return checkSimpleContentLocations();

				fs.exists(stdout, function(exists) {
					if (exists) {
						ee.emit(&#x27;done&#x27;, path.relative(&#x27;.&#x27;, stdout));
					} else {
						checkSimpleContentLocations();
					}
				});
			});

		} else {
			checkSimpleContentLocations();
		}
	}).on(&#x27;error&#x27;, function(err) {
		checkSimpleContentLocations();
	});

	return ee;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//});
//wordpress.getCurrentVersion().on(&#x27;close&#x27;, function(ver) {
//	console.log(ver);
//});
//wordpress.getDbCredentials().on(&#x27;done&#x27;, function(creds) {
//	console.log(creds);
//});
//wordpress.<span class="apidocCodeKeywordSpan">getContentDir</span>().on(&#x27;done&#x27;, function(dir) {
//	console.log(dir);
//});
//wordpress.activateTheme(&#x27;yeopress&#x27;, function() {
//	console.log(arguments);
//});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.getCurrentVersion" id="apidoc.element.generator-wordpress.wordpress.getCurrentVersion">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getCurrentVersion
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getCurrentVersion(callback) {
	var latestVersion = &#x27;3.8&#x27;;
	require(&#x27;simple-git&#x27;)().listRemote(&#x27;--tags &#x27;+ wordpressRepo, function(err, tagsList) {
		if (err) return callback(err, latestVersion);
		tagList = (&#x27;&#x27; + tagsList).split(&#x27;\n&#x27;);
		tagList.pop();
		lastTag = /\d\.\d(\.\d)?/ig.exec(tagList.pop());
		if (lastTag !== null) {
			latestVersion = lastTag[0];
		}
		callback(null, latestVersion);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var done = this.async();

	// Display welcome message
	this.logger.log(art.wp, {logPrefix: &#x27;&#x27;});
	
	// Get the current version number of wordpress
	this.logger.verbose(&#x27;Getting current WP version&#x27;);
	wordpress.<span class="apidocCodeKeywordSpan">getCurrentVersion</span>(function(err, ver) {
		if (err) this.logger.warn(&#x27;Error getting WP versions.  Falling back to &#x27; + ver);
		this.logger.verbose(&#x27;Got current WP version: &#x27; + ver);
		this.conf.set(&#x27;wpVer&#x27;, ver);
		getInput();
	}.bind(this));

	// Get the input
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.getDbCredentials" id="apidoc.element.generator-wordpress.wordpress.getDbCredentials">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getDbCredentials
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getDbCredentials() {
	var ee = new EventEmitter();

	loadConfig().on(&#x27;done&#x27;, function(contents) {
		var db    = {};
		db.name   = contents.match(/define\([&#x22;&#x27;]DB_NAME[&#x22;&#x27;],[\s]*[&#x22;&#x27;](.*)[&#x22;&#x27;]\)/)[1];
		db.user   = contents.match(/define\([&#x22;&#x27;]DB_USER[&#x22;&#x27;],[\s]*[&#x22;&#x27;](.*)[&#x22;&#x27;]\)/)[1];
		db.pass   = contents.match(/define\([&#x22;&#x27;]DB_PASSWORD[&#x22;&#x27;],[\s]*[&#x22;&#x27;](.*)[&#x22;&#x27;]\)/)[1];
		db.host   = contents.match(/define\([&#x22;&#x27;]DB_HOST[&#x22;&#x27;],[\s]*[&#x22;&#x27;](.*)[&#x22;&#x27;]\)/)[1];
		db.prefix = contents.match(/\$table_prefix[\s]*=[\s]*[&#x22;&#x27;](.*)[&#x22;&#x27;]/)[1];

		ee.emit(&#x27;done&#x27;, db);
	}).on(&#x27;error&#x27;, function(err) {
		ee.emit(&#x27;error&#x27;, err);
	});

	return ee;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//});
//wordpress.getSaltKeys().on(&#x27;end&#x27;, function(keys) {
//	console.log(keys);
//});
//wordpress.getCurrentVersion().on(&#x27;close&#x27;, function(ver) {
//	console.log(ver);
//});
//wordpress.<span class="apidocCodeKeywordSpan">getDbCredentials</span>().on(&#x27;done&#x27;, function(creds) {
//	console.log(creds);
//});
//wordpress.getContentDir().on(&#x27;done&#x27;, function(dir) {
//	console.log(dir);
//});
//wordpress.activateTheme(&#x27;yeopress&#x27;, function() {
//	console.log(arguments);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.getLanguage" id="apidoc.element.generator-wordpress.wordpress.getLanguage">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getLanguage
        <span class="apidocSignatureSpan">(contentDir, language, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getLanguage(contentDir, language, callback) {
	var files = {
		&#x27;&#x27;: &#x27;%s.mo&#x27;,
		&#x27;admin&#x27;: &#x27;admin-%s.mo&#x27;,
		&#x27;admin/network&#x27;: &#x27;admin-network-%s.mo&#x27;,
		&#x27;twentyeleven&#x27;: path.join(&#x27;themes&#x27;, &#x27;twentyeleven-%s.mo&#x27;),
		&#x27;twentytwelve&#x27;: path.join(&#x27;themes&#x27;, &#x27;twentytwelve-%s.mo&#x27;),
		&#x27;twentythirteen&#x27;: path.join(&#x27;themes&#x27;, &#x27;twentythirteen-%s.mo&#x27;),
		&#x27;twentyfourteen&#x27;: path.join(&#x27;themes&#x27;, &#x27;twentyfourteen-%s.mo&#x27;),
	};

	var requested = complete = 0, errors = [];
	for (var file in files) {
		requested++;
		downloadLanguageFile(language, file, &#x27;mo&#x27;, function(err, res) {
			if (err) {
				return errors.push(err);
			}

			// Pipe to  file
			var p = path.join(contentDir, &#x27;languages&#x27;, util.format(files[file], language));
			var f = fs.createWriteStream(p);
			res.pipe(f);

			// Complete
			res.on(&#x27;end&#x27;, function() {
				complete++;
				if (requested == complete) callback(errors.length ? null : errors);
			});
		});
	}

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Create Language directory
Generator.prototype.doveIlBagno = function() {

	// Only do this if the user specified a language
	if (this.conf.get(&#x27;wpLang&#x27;)) {
		this.logger.log(&#x27;Setting up locale files&#x27;);
		wp.locale.<span class="apidocCodeKeywordSpan">getLanguage</span>(this.conf.get(&#x27;wpLang&#x27;), this.conf.get(&#x27;contentDir
&#x27;), function (err) {
			if (err) this.logger.error(err);
		}.bind(this));
	}

};

// Write all these newly created files to disk so that the rest of the generator doesn&#x27;t fail
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.getSaltKeys" id="apidoc.element.generator-wordpress.wordpress.getSaltKeys">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>getSaltKeys
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getSaltKeys(callback) {
	var ee = new EventEmitter(),
		keys = &#x27;&#x27;;
	https.get(&#x22;https://api.wordpress.org/secret-key/1.1/salt/&#x22;, function(res) {
		res.on(&#x27;data&#x27;, function(d) {
			keys += d.toString();
		}).on(&#x27;end&#x27;, function() {
			ee.emit(&#x27;end&#x27;, keys);
		});
	});
	if (typeof callback === &#x27;function&#x27;) {
		ee.on(&#x27;end&#x27;, callback);
	}
	return ee;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// wp-config.php
Generator.prototype.muHaHaHaConfig = function() {

	var done = this.async();

	this.logger.log(&#x27;Getting salt keys&#x27;);
	wp.misc.<span class="apidocCodeKeywordSpan">getSaltKeys</span>(function(err, saltKeys) {
		if (err) {
			this.logger.error(&#x27;Failed to get salt keys, remember to change them.&#x27;);
		}
		this.logger.verbose(&#x27;Salt keys: &#x27; + JSON.stringify(saltKeys, null, &#x27;  &#x27;));
		this.conf.set(&#x27;saltKeys&#x27;, saltKeys);
		this.logger.verbose(&#x27;Copying wp-config&#x27;);
		this.fs.copyTpl(this.templatePath(&#x27;wp-config.php.tmpl&#x27;), this.destinationPath(&#x27;wp-config.php&#x27;), { conf: this
.conf });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.installTheme" id="apidoc.element.generator-wordpress.wordpress.installTheme">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>installTheme
        <span class="apidocSignatureSpan">(generator, config, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function installTheme(generator, config, done) {

	if (config.themeType == &#x27;git&#x27;) {
		generator.remote(config.themeUser, config.themeRepo, config.themeBranch, function(err, remote) {
			remote.directory(&#x27;.&#x27;, path.join(config.contentDir, &#x27;themes&#x27;, config.themeDir));
			done();
		}, config.refreshRemote);
	} else if (config.themeType == &#x27;tar&#x27;) {
		generator.tarball(config.themeTarballUrl, path.join(config.contentDir, &#x27;themes&#x27;, config.themeDir), done);
	}

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Install and activate the theme
Generator.prototype.dumbledoreHasStyle = function() {

	if (this.conf.get(&#x27;installTheme&#x27;)) {
		var done = this.async();

		this.logger.log(&#x27;Starting to install theme&#x27;);
		wordpress.<span class="apidocCodeKeywordSpan">installTheme</span>(this, this.conf.get(), function() {
			//@TODO You need to run the install before doing this
			//see if I can get yeopress to do that.
			//wordpress.activateTheme(this.conf.get(), done);
			this.logger.verbose(&#x27;Theme install complete&#x27;);
			done();
		}.bind(this));
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.loadConfig" id="apidoc.element.generator-wordpress.wordpress.loadConfig">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>loadConfig
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function loadConfig() {
	var ee = new EventEmitter();

	function readConfig(path) {
		fs.readFile(path, {encoding:&#x27;utf8&#x27;}, function(err, contents) {
			if (err) return ee.emit(&#x27;error&#x27;, err);
			ee.emit(&#x27;done&#x27;, contents);
		});
	}

	fs.exists(&#x27;wp-config.php&#x27;, function(exists) {
		if (exists) {
			readConfig(&#x27;wp-config.php&#x27;);
		} else {
			fs.exists(&#x27;../wp-config.php&#x27;, function(exists) {
				if (exists) {
					readConfig(&#x27;../wp-config.php&#x27;);
				} else {
					ee.emit(&#x27;error&#x27;, &#x27;Config file does not exist.&#x27;);
				}
			});
		}
	});

	return ee;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.generator-wordpress.wordpress.setupTheme" id="apidoc.element.generator-wordpress.wordpress.setupTheme">
        function <span class="apidocSignatureSpan">generator-wordpress.wordpress.</span>setupTheme
        <span class="apidocSignatureSpan">(generator, config, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setupTheme(generator, config, done) {
	
	console.log(chalk.green(&#x27;Setting Up Theme&#x27;));

	var themePath = path.join(config.contentDir, &#x27;themes&#x27;, config.themeDir),
		themePackageJson = path.join(themePath, &#x27;package.json&#x27;);

	var themeTaskFile = &#x27;&#x27;,
		themeTaskCmd = &#x27;&#x27;;

	if (config.themeTaskRunner == &#x27;grunt&#x27;) {
		themeTaskFile = &#x27;Gruntfile.js&#x27;,
		themeTaskCmd = &#x27;grunt&#x27;;
	} else if (config.themeTaskRunner == &#x27;gulp&#x27;) {
		themeTaskFile = &#x27;gulpfile.js&#x27;,
		themeTaskCmd = &#x27;gulp&#x27;;
	}

	if (fs.existsSync(themePackageJson)) {
		var oldDir = process.cwd();
		process.chdir(themePath);
		console.log(chalk.green(&#x27;Installing Node Packages (be patient)&#x27;));

		exec(&#x27;npm install&#x27;, function(err, stdout, stderr) {
			if (err) {
				console.error(&#x27;Error installing packages&#x27;, err, stdout, stderr);
				return done();
			}

			if (fs.existsSync(themeTaskFile)) {
				exec(themeTaskCmd + &#x27; setup&#x27;, function(err) {
					console.log(chalk.green(&#x27;Theme setup!&#x27;));
					process.chdir(oldDir);
					done();
				});
			} else {
				console.log(chalk.red(themeTaskFile + &#x27; missing!&#x27;));
				process.chdir(oldDir);
				done();
			}
		});
	} else {
		console.log(chalk.red(&#x27;package.json missing!&#x27;));
		done();
	}

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

// Setup theme
Generator.prototype.dummyYouHaveToPlugItInFirst = function() {

	if (this.conf.get(&#x27;installTheme&#x27;)) {
		this.logger.log(&#x27;Starting theme setup&#x27;);
		wordpress.<span class="apidocCodeKeywordSpan">setupTheme</span>(this, this.conf.get(), this.async());
		this.logger.verbose(&#x27;Theme setup complete&#x27;);
	}

};

// Commit again with the template
Generator.prototype.gitMeMOARCommits = function() {
...</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
